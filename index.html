<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Node-jmx by zuazo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Node-jmx</h1>
      <h2 class="project-tagline">node.js library to connect with java applications through JMX.</h2>
      <a href="https://github.com/zuazo/node-jmx" class="btn">View on GitHub</a>
      <a href="https://github.com/zuazo/node-jmx/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/zuazo/node-jmx/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="node-jmx" class="anchor" href="#node-jmx" aria-hidden="true"><span class="octicon octicon-link"></span></a>node-jmx</h1>

<p><a href="http://badge.fury.io/js/jmx"><img src="https://badge.fury.io/js/jmx.svg" alt="NPM version"></a>
<a href="https://codeclimate.com/github/zuazo/node-jmx"><img src="http://img.shields.io/codeclimate/github/zuazo/node-jmx.svg" alt="Code Climate"></a>
<a href="https://travis-ci.org/zuazo/node-jmx"><img src="http://img.shields.io/travis/zuazo/node-jmx.svg" alt="Build Status"></a>
<a href="https://coveralls.io/r/zuazo/node-jmx?branch=master"><img src="http://img.shields.io/coveralls/zuazo/node-jmx.svg" alt="Coverage Status"></a></p>

<p>Node.js bridge library to communicate with Java applications through JMX.</p>

<h2>
<a id="requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul>
<li>Tested with node <code>&gt;= 0.10</code>.</li>
<li>Java version <code>6</code> or higher.</li>
<li>
<code>node-java</code>: See <a href="https://github.com/joeferner/node-java/tree/v0.6.0#installation">its installation instructions</a>
</li>
</ul>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<pre><code>$ npm install jmx
</code></pre>

<h2>
<a id="usage-examples" class="anchor" href="#usage-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage examples</h2>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> jmx <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>jmx<span class="pl-pds">"</span></span>);

client <span class="pl-k">=</span> <span class="pl-smi">jmx</span>.<span class="pl-en">createClient</span>({
  host<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>, <span class="pl-c">// optional</span>
  port<span class="pl-k">:</span> <span class="pl-c1">3000</span>
});

<span class="pl-smi">client</span>.<span class="pl-en">connect</span>();
<span class="pl-smi">client</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>connect<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>() {

  <span class="pl-smi">client</span>.<span class="pl-c1">getAttribute</span>(<span class="pl-s"><span class="pl-pds">"</span>java.lang:type=Memory<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>HeapMemoryUsage<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {
    <span class="pl-k">var</span> used <span class="pl-k">=</span> <span class="pl-smi">data</span>.<span class="pl-en">getSync</span>(<span class="pl-s"><span class="pl-pds">'</span>used<span class="pl-pds">'</span></span>);
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>HeapMemoryUsage used: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> <span class="pl-smi">used</span>.<span class="pl-smi">longValue</span>);
    <span class="pl-c">// console.log(data.toString());</span>
  });

  <span class="pl-smi">client</span>.<span class="pl-c1">setAttribute</span>(<span class="pl-s"><span class="pl-pds">"</span>java.lang:type=Memory<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Verbose<span class="pl-pds">"</span></span>, <span class="pl-c1">true</span>, <span class="pl-k">function</span>() {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>Memory verbose on<span class="pl-pds">"</span></span>); <span class="pl-c">// callback is optional</span>
  });

  <span class="pl-smi">client</span>.<span class="pl-en">invoke</span>(<span class="pl-s"><span class="pl-pds">"</span>java.lang:type=Memory<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>gc<span class="pl-pds">"</span></span>, [], <span class="pl-k">function</span>(<span class="pl-smi">data</span>) {
    <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">"</span>gc() done<span class="pl-pds">"</span></span>);
  });

});</pre></div>

<div class="highlight highlight-source-js"><pre>client <span class="pl-k">=</span> <span class="pl-smi">jmx</span>.<span class="pl-en">createClient</span>({
  service<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>service:jmx:rmi:///jndi/rmi://localhost:3000/jmxrmi<span class="pl-pds">"</span></span>
});</pre></div>

<p>You can check the <a href="https://github.com/nearinfinity/node-java/blob/master/README.md#quick-examples">node-java documentation</a> to learn how to work with java objects in node.js.</p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<h3>
<a id="jmxcreateclientoptions" class="anchor" href="#jmxcreateclientoptions" aria-hidden="true"><span class="octicon octicon-link"></span></a>jmx.createClient(options)</h3>

<p>Returns a <code>Client</code> object.</p>

<h4>
<a id="options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>options</h4>

<p><code>options</code> is a hash table with the following values:</p>

<ul>
<li>
<code>service</code> - The full service URL string, with <em>host</em>, <em>port</em>, <em>protocol</em> and <em>urlPath</em> included. For example <code>"service:jmx:rmi:///jndi/rmi://localhost:3000/jmxrmi"</code>.</li>
<li>
<code>host</code> - Hostname to connect to (defaults to <code>"localhost"</code>).</li>
<li>
<code>port</code> - JMX port number to connect to.</li>
<li>
<code>protocol</code> - Protocol to use (defaults to <code>"rmi"</code>).</li>
<li>
<code>urlPath</code> - JMX URL Path (defaults to <code>"/jndi/{protocol}://{host}:{port}/jmx{protocol}"</code>).</li>
<li>
<code>username</code> - JMX authentication username.</li>
<li>
<code>password</code> - JMX authentication password.</li>
</ul>

<h3>
<a id="clientconnect" class="anchor" href="#clientconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.connect()</h3>

<p>Connects to the JMX server. Emits <code>connect</code> event when done.</p>

<h3>
<a id="clientdisconnect" class="anchor" href="#clientdisconnect" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.disconnect()</h3>

<p>Disconnects from the JMX server. Emits <code>disconnect</code> event when done.</p>

<h3>
<a id="clientgetattributembean-attribute-callback" class="anchor" href="#clientgetattributembean-attribute-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.getAttribute(mbean, attribute, callback)</h3>

<p>Returns an attribute from a MBean.</p>

<ul>
<li>
<code>mbean</code> - MBean query address as string. For example "java.lang:type=Memory".</li>
<li>
<code>attribute</code> - Attribute name as string.</li>
<li><code>callback(attrValue)</code></li>
</ul>

<h3>
<a id="clientgetattributesmbean-attributes-callback" class="anchor" href="#clientgetattributesmbean-attributes-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.getAttributes(mbean, attributes, callback)</h3>

<p>Returns an attribute list from a MBean.</p>

<ul>
<li>
<code>mbean</code> - MBean query address as string. For example "java.lang:type=Memory".</li>
<li>
<code>attributes</code> - Attribute names as an array of strings.</li>
<li><code>callback(attrValue)</code></li>
</ul>

<h3>
<a id="clientgetdefaultdomaincallback" class="anchor" href="#clientgetdefaultdomaincallback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.getDefaultDomain(callback)</h3>

<p>Returns the default domain as string.</p>

<ul>
<li><code>callback(domainName)</code></li>
</ul>

<h3>
<a id="clientgetdomainscallback" class="anchor" href="#clientgetdomainscallback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.getDomains(callback)</h3>

<p>Returns an array of domain names.</p>

<ul>
<li><code>callback(domainsArray)</code></li>
</ul>

<h3>
<a id="clientgetmbeancountcallback" class="anchor" href="#clientgetmbeancountcallback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.getMBeanCount(callback)</h3>

<p>Returns total the number of MBeans.</p>

<ul>
<li><code>callback(mbeanCount)</code></li>
</ul>

<h3>
<a id="clientinvokembean-methodname-params-signature-callback" class="anchor" href="#clientinvokembean-methodname-params-signature-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.invoke(mbean, methodName, params, [signature,] [callback])</h3>

<p>Invokes a MBean operation.</p>

<ul>
<li>
<code>mbean</code> - The MBean query address as string. For example <code>"java.lang:type=Memory"</code>.</li>
<li>
<code>methodName</code> - The method name as string.</li>
<li>
<code>params</code> - The parameters to pass to the operation as array. For example <code>[ 1, 5, "param3" ]</code>.</li>
<li>
<code>signature</code> (optional) - An array with the signature of the <em>params</em>. Sometimes may be necessary to use this if class names are not correctly detected (gives a <em>NoSuchMethodException</em>). For example <code>[ "int", "java.lang.Integer", "java.lang.String" ]</code>.</li>
<li><code>callback(returnedValue)</code></li>
</ul>

<h3>
<a id="clientlistmbeanscallback" class="anchor" href="#clientlistmbeanscallback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.listMBeans(callback)</h3>

<p>Lists server MBeans. Callback returns an array of strings containing MBean names.</p>

<h3>
<a id="clientonevent-callback" class="anchor" href="#clientonevent-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.on(event, callback)</h3>

<p>Adds a listener for the especified event.</p>

<h4>
<a id="events" class="anchor" href="#events" aria-hidden="true"><span class="octicon octicon-link"></span></a>events</h4>

<ul>
<li><code>connect</code></li>
<li><code>disconnect</code></li>
<li>
<code>error</code> - Passes the error as first parameter to the callback function.</li>
</ul>

<h3>
<a id="clientsetattributembean-attribute-value-classname-callback" class="anchor" href="#clientsetattributembean-attribute-value-classname-callback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Client.setAttribute(mbean, attribute, value, [className,] [callback])</h3>

<p>Changes an attribute value of the MBean.</p>

<ul>
<li>
<code>mbean</code> - The MBean query address as string. For example <code>"java.lang:type=Memory"</code>.</li>
<li>
<code>attribute</code> - The attribute name as string.</li>
<li>
<code>value</code> - The attribute value.</li>
<li>
<code>className</code> (optional) - The attribute java className. Sometimes may be necessary to use this if value type is not correctly detected (gives a <em>InvalidAttributeValueException</em>). For example <code>"java.lang.Long"</code>.</li>
<li>
<code>callback()</code> (optional)</li>
</ul>

<h2>
<a id="error-handling" class="anchor" href="#error-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Error handling</h2>

<p>Errors are <strong>not printed</strong> to the console by default. You can catch them with something like the following:</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">client</span>.<span class="pl-en">on</span>(<span class="pl-s"><span class="pl-pds">"</span>error<span class="pl-pds">"</span></span>, <span class="pl-k">function</span>(<span class="pl-smi">err</span>) {
  <span class="pl-c">// ...</span>
});</pre></div>

<h2>
<a id="debugging" class="anchor" href="#debugging" aria-hidden="true"><span class="octicon octicon-link"></span></a>Debugging</h2>

<p>You can enable debugging and error printing to console using <code>NODE_DEBUG</code> environment variable:</p>

<pre><code>$ NODE_DEBUG="jmx" node [...]
</code></pre>

<h2>
<a id="testing" class="anchor" href="#testing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Testing</h2>

<p>See <a href="https://github.com/zuazo/node-jmx/blob/master/TESTING.md">TESTING.md</a>.</p>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>Please do not hesitate to <a href="https://github.com/zuazo/node-jmx/issues/new">open an issue</a> with any questions or problems.</p>

<p>See <a href="https://github.com/zuazo/node-jmx/blob/master/CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>

<h2>
<a id="todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<p>See <a href="https://github.com/zuazo/node-jmx/blob/master/TODO.md">TODO.md</a>.</p>

<h2>
<a id="history" class="anchor" href="#history" aria-hidden="true"><span class="octicon octicon-link"></span></a>History</h2>

<p>See <a href="https://github.com/zuazo/node-jmx/blob/master/CHANGELOG.md">CHANGELOG.md</a>.</p>

<h2>
<a id="license-and-author" class="anchor" href="#license-and-author" aria-hidden="true"><span class="octicon octicon-link"></span></a>License and Author</h2>

<table>
<thead>
<tr>
<th align="left"></th>
<th align="left"></th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><strong>Author:</strong></td>
<td align="left">
<a href="https://github.com/zuazo">Xabier de Zuazo</a> (<a href="mailto:xabier@zuazo.org">xabier@zuazo.org</a>)</td>
</tr>
<tr>
<td align="left"><strong>Contributor:</strong></td>
<td align="left"><a href="https://github.com/ericbroda">Eric</a></td>
</tr>
<tr>
<td align="left"><strong>Copyright:</strong></td>
<td align="left">Copyright (c) 2015, Xabier de Zuazo</td>
</tr>
<tr>
<td align="left"><strong>Copyright:</strong></td>
<td align="left">Copyright (c) 2013-2015 Onddo Labs, SL.</td>
</tr>
<tr>
<td align="left"><strong>License:</strong></td>
<td align="left">Apache License, Version 2.0</td>
</tr>
</tbody>
</table>

<pre><code>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/zuazo/node-jmx">Node-jmx</a> is maintained by <a href="https://github.com/zuazo">zuazo</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38093658-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
